(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78c73c3a"],{1478:function(t,e,a){},1516:function(t,e,a){"use strict";"function"===typeof Symbol&&Symbol.iterator;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(function(){function e(t,e,a){return void 0==a?t:(t=null==t?{}:t,t[e]=a,t)}function o(t){function a(t){t.parentElement.removeChild(t)}function o(t,e,a){var n=0===a?t.children[0]:t.children[a-1].nextSibling;t.insertBefore(e,n)}function s(t,e){return t.map(function(t){return t.elm}).indexOf(e)}function r(t,e,a){if(!t)return[];var n=t.map(function(t){return t.elm}),o=[].concat(i(e)).map(function(t){return n.indexOf(t)});return a?o.filter(function(t){return-1!==t}):o}function c(t,e){var a=this;this.$nextTick(function(){return a.$emit(t.toLowerCase(),e)})}function l(t){var e=this;return function(a){null!==e.realList&&e["onDrag"+t](a),c.call(e,t,a)}}var d=["Start","Add","Remove","Update","End"],u=["Choose","Sort","Filter","Clone"],p=["Move"].concat(d,u).map(function(t){return"on"+t}),h=null,f={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},m={name:"draggable",props:f,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(t){var a=this.$slots.default;if(a&&1===a.length){var n=a[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var o=0,s=a,r=this.$slots,c=r.header,l=r.footer;c&&(o=c.length,s=s?[].concat(i(c),i(s)):[].concat(i(c))),l&&(s=s?[].concat(i(s),i(l)):[].concat(i(l))),this.headerOffset=o;var d=null,u=function(t,a){d=e(d,t,a)};if(u("attrs",this.$attrs),this.componentData){var p=this.componentData,h=p.on,f=p.props;u("on",h),u("props",f)}return t(this.element,d,s)},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var a={};d.forEach(function(t){a["on"+t]=l.call(e,t)}),u.forEach(function(t){a["on"+t]=c.bind(e,t)});var i=n({},this.options,a,{onMove:function(t,a){return e.onDragMove(t,a)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new t(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){for(var e in t)-1==p.indexOf(e)&&this._sortable.option(e,t[e])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick(function(){t.visibleIndexes=r(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode)})},getUnderlyingVm:function(t){var e=s(this.getChildrenNodes()||[],t);if(-1===e)return null;var a=this.realList[e];return{index:e,element:a}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&"transition-group"===e.$options._componentTag?e.$parent:e},emitChanges:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})},alterList:function(t){if(this.list)t(this.list);else{var e=[].concat(i(this.value));t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,t)};this.alterList(e)},updatePosition:function(t,e){var a=function(a){return a.splice(e,0,a.splice(t,1)[0])};this.alterList(a)},getRelatedContextFromMoveEvent:function(t){var e=t.to,a=t.related,i=this.getUnderlyingPotencialDraggableComponent(e);if(!i)return{component:i};var o=i.realList,s={list:o,component:i};if(e!==a&&o&&i.getUnderlyingVm){var r=i.getUnderlyingVm(a);if(r)return n(r,s)}return s},getVmIndex:function(t){var e=this.visibleIndexes,a=e.length;return t>a-1?a:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var a=this.getComponent();a.children=[],a.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),h=t.item},onDragAdd:function(t){this.updateEvenemt(t);var e=t.item._underlying_vm_;if(void 0!==e){a(t.item);var n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();var i={element:e,newIndex:n};this.emitChanges({added:i})}},onDragRemove:function(t){if(this.updateEvenemt(t),o(this.rootContainer,t.item,t.oldIndex),this.isCloning)a(t.clone);else{var e=this.context.index;this.spliceList(e,1);var n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})}},onDragUpdate:function(t){this.updateEvenemt(t),a(t.item),o(t.from,t.item,t.oldIndex);var e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);var i={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:i})},updateEvenemt:function(t){this.updateProperty(t,"newIndex"),this.updateProperty(t,"oldIndex")},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var a=[].concat(i(e.to.children)).filter(function(t){return"none"!==t.style["display"]}),n=a.indexOf(e.related),o=t.component.getVmIndex(n),s=-1!=a.indexOf(h);return s||!e.willInsertAfter?o:o+1},onDragMove:function(t,e){var a=this.move;if(!a||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(t),o=this.context,s=this.computeFutureIndex(i,t);return n(o,{futureIndex:s}),n(t,{relatedContext:i,draggedContext:o}),a(t,e)},onDragEnd:function(t){this.computeIndexes(),h=null}}};return m}Array.from||(Array.from=function(t){return[].slice.call(t)});var s=a("53fe");t.exports=o(s)})()},"1b80":function(t,e,a){"use strict";e["a"]={data:function(){return{pagination:{page:1,pageSize:10,total:0,showTotal:function(t,e){return"共 ".concat(t," 条")}}}},computed:{requestData:function(){return{page:this.pagination.page,pageSize:this.pagination.pageSize}}},methods:{init:function(){},pageChange:function(t){this.pagination.page=t,this.requestData.page=t.current,this.init()}}}},"24d2":function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"i",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"d",function(){return r}),a.d(e,"h",function(){return c}),a.d(e,"f",function(){return l}),a.d(e,"a",function(){return d}),a.d(e,"g",function(){return u}),a.d(e,"e",function(){return p});var n=a("22b6");function i(t){return n["a"].post("project/project",t)}function o(t){return n["a"].post("project/project/selfList",t)}function s(t){var e="project/project/save";return t.projectCode&&(e="project/project/edit"),n["a"].post(e,t)}function r(t){return n["a"].post("project/project/quit",{projectCode:t})}function c(t){return n["a"].post("project/project/recycle",{projectCode:t})}function l(t){return n["a"].post("project/project/recovery",{projectCode:t})}function d(t){return n["a"].post("project/project/archive",{projectCode:t})}function u(t){return n["a"].post("project/project/recoveryArchive",{projectCode:t})}function p(t){return n["a"].post("project/project/read",{projectCode:t})}},"2b2a":function(t,e,a){"use strict";var n=a("2c97"),i=a.n(n);i.a},"2c97":function(t,e,a){},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},"39bf":function(t,e,a){},4200:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var n=a("22b6");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"collect";return n["a"].post("project/project_collect/collect",{type:e,projectCode:t})}},"53fe":function(t,e,a){var n,i;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
(function(o){"use strict";n=o,i="function"===typeof n?n.call(e,a,e,t):n,void 0===i||(t.exports=i)})(function(){"use strict";if("undefined"===typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,a,n,i,o,s,r,c,l,d,u,p,h,f,m,v,g,b,k,_,C,w,y,x,j=[],T=!1,S=!1,M=!1,D=[],O=!1,E=!1,I=/\s+/g,N="Sortable"+(new Date).getTime(),$=window,P=$.document,L=$.parseInt,A=$.setTimeout,Y=$.jQuery||$.Zepto,z=$.Polymer,F={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),B=!!navigator.userAgent.match(/Edge/i),R=B||X?"cssFloat":"float",K="draggable"in P.createElement("div"),H=function(){if(X)return!1;var t=P.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),q=!1,U=!1,V=Math.abs,W=Math.min,G=[],J=function(t,e){var a=kt(t),n=L(a.width),i=Tt(t,0,e),o=Tt(t,1,e),s=i&&kt(i),r=o&&kt(o),c=s&&L(s.marginLeft)+L(s.marginRight)+Xt(i).width,l=r&&L(r.marginLeft)+L(r.marginRight)+Xt(o).width;return"flex"===a.display?"column"===a.flexDirection||"column-reverse"===a.flexDirection?"vertical":"horizontal":i&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||c>=n&&"none"===a[R]||o&&"none"===a[R]&&c+l>n)?"vertical":"horizontal"},Z=function(t,e){for(var a=0;a<D.length;a++)if(!D[a].children.length){var n=Xt(D[a]),i=D[a][N].options.emptyInsertThreshold,o=t>=n.left-i&&t<=n.right+i,s=e>=n.top-i&&e<=n.bottom+i;if(o&&s)return D[a]}},Q=function(t,e,a,n,i){var o=Xt(a),s="vertical"===n?o.left:o.top,r="vertical"===n?o.right:o.bottom,c="vertical"===n?t:e;return s<c&&c<r},tt=function(e,a,n){var i=e===t&&x||Xt(e),o=a===t&&x||Xt(a),s="vertical"===n?i.left:i.top,r="vertical"===n?i.right:i.bottom,c="vertical"===n?i.width:i.height,l="vertical"===n?o.left:o.top,d="vertical"===n?o.right:o.bottom,u="vertical"===n?o.width:o.height;return s===l||r===d||s+c/2===l+u/2},et=function(t,e){if(!t||!t.getBoundingClientRect)return $;var a=t,n=!1;do{if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var i=kt(a);if(a.clientWidth<a.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!a||!a.getBoundingClientRect||a===P.body)return $;if(n||e)return a;n=!0}}}while(a=a.parentNode);return $},at=$t(function(t,e,a,n){if(e.scroll){var i=a?a[N]:window,o=e.scrollSensitivity,s=e.scrollSpeed,d=t.clientX,u=t.clientY,p=(window.innerWidth,window.innerHeight,!1);c!==a&&(nt(),r=e.scroll,l=e.scrollFn,!0===r&&(r=et(a,!0),c=r));var h=0,f=r;do{var m,v,g,k,_,C,w,y,x,S=f,M=Xt(S),D=M.top,O=M.bottom,E=M.left,I=M.right,L=M.width,A=M.height;if(S!==$?(m=S.scrollWidth,v=S.scrollHeight,g=kt(S),C=L<m&&("auto"===g.overflowX||"scroll"===g.overflowX),w=A<v&&("auto"===g.overflowY||"scroll"===g.overflowY),y=S.scrollLeft,x=S.scrollTop):(m=P.documentElement.scrollWidth,v=P.documentElement.scrollHeight,g=kt(P.documentElement),C=L<m&&("auto"===g.overflowX||"scroll"===g.overflowX||"visible"===g.overflowX),w=A<v&&("auto"===g.overflowY||"scroll"===g.overflowY||"visible"===g.overflowY),y=P.documentElement.scrollLeft,x=P.documentElement.scrollTop),k=C&&(V(I-d)<=o&&y+L<m)-(V(E-d)<=o&&!!y),_=w&&(V(O-u)<=o&&x+A<v)-(V(D-u)<=o&&!!x),!j[h])for(var Y=0;Y<=h;Y++)j[Y]||(j[Y]={});j[h].vx==k&&j[h].vy==_&&j[h].el===S||(j[h].el=S,j[h].vx=k,j[h].vy=_,clearInterval(j[h].pid),!S||0==k&&0==_||(p=!0,j[h].pid=setInterval(function(){n&&0===this.layer&&pt.active._emulateDragOver(!0);var e=j[this.layer].vy?j[this.layer].vy*s:0,a=j[this.layer].vx?j[this.layer].vx*s:0;"function"===typeof l&&"continue"!==l.call(i,a,e,t,b,j[this.layer].el)||(j[this.layer].el===$?$.scrollTo($.pageXOffset+a,$.pageYOffset+e):(j[this.layer].el.scrollTop+=e,j[this.layer].el.scrollLeft+=a))}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&f!==$&&(f=et(f,!1)));T=p}},30),nt=function(){j.forEach(function(t){clearInterval(t.pid)}),j=[]},it=function(t){function e(t,a){return function(n,i,o,s){var r=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==t&&(a||r))return!0;if(null==t||!1===t)return!1;if(a&&"clone"===t)return t;if("function"===typeof t)return e(t(n,i,o,s),a)(n,i,o,s);var c=(a?n:i).options.group.name;return!0===t||"string"===typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var a={},n=t.group;n&&"object"==typeof n||(n={name:n}),a.name=n.name,a.checkPull=e(n.pull,!0),a.checkPut=e(n.put),a.revertClone=n.revertClone,t.group=a},ot=function(e){t&&t.parentNode&&t.parentNode[N]&&t.parentNode[N]._computeIsAligned(e)},st=function(t,e){var a=e;while(!a[N])a=a.parentNode;return t===a},rt=function(t,e,a){var n=t.parentNode;while(n&&!n[N])n=n.parentNode;n&&n[N][a](Lt(e,{artificialBubble:!0}))},ct=function(){!H&&a&&kt(a,"display","none")},lt=function(){!H&&a&&kt(a,"display","")};P.addEventListener("click",function(t){if(M)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),M=!1,!1},!0);var dt,ut=function(e){if(t){var a=Z(e.clientX,e.clientY);a&&a[N]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:a,rootEl:a})}};function pt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Lt({},e),t[N]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return J(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:L(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==pt.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in a)!(n in e)&&(e[n]=a[n]);for(var i in it(e),this)"_"===i.charAt(0)&&"function"===typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&K,e.supportPointer?vt(t,"pointerdown",this._onTapStart):(vt(t,"mousedown",this._onTapStart),vt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(vt(t,"dragover",this),vt(t,"dragenter",this)),D.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function ht(t,e,a,n){if(t){a=a||P;do{if(">*"===e&&t.parentNode===a||Nt(t,e)||n&&t===a)return t;if(t===a)break}while(t=ft(t))}return null}function ft(t){return t.host&&t!==P&&t.host.nodeType?t.host:t.parentNode}function mt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vt(t,e,a){t.addEventListener(e,a,F)}function gt(t,e,a){t.removeEventListener(e,a,F)}function bt(t,e,a){if(t&&e)if(t.classList)t.classList[a?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(I," ").replace(" "+e+" "," ");t.className=(n+(a?" "+e:"")).replace(I," ")}}function kt(t,e,a){var n=t&&t.style;if(n){if(void 0===a)return P.defaultView&&P.defaultView.getComputedStyle?a=P.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),void 0===e?a:a[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=a+("string"===typeof a?"":"px")}}function _t(t){var e="";do{var a=kt(t,"transform");a&&"none"!==a&&(e=a+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function Ct(t,e,a){if(t){var n=t.getElementsByTagName(e),i=0,o=n.length;if(a)for(;i<o;i++)a(n[i],i);return n}return[]}function wt(t,e,a,i,o,s,r,c,l){t=t||e[N];var d,u=t.options,p="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||X||B?(d=P.createEvent("Event"),d.initEvent(a,!0,!0)):d=new CustomEvent(a,{bubbles:!0,cancelable:!0}),d.to=o||e,d.from=s||e,d.item=i||e,d.clone=n,d.oldIndex=r,d.newIndex=c,d.originalEvent=l,e&&e.dispatchEvent(d),u[p]&&u[p].call(t,d)}function yt(t,e,a,n,i,o,s,r){var c,l,d=t[N],u=d.options.onMove;return!window.CustomEvent||X||B?(c=P.createEvent("Event"),c.initEvent("move",!0,!0)):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=a,c.draggedRect=n,c.related=i||e,c.relatedRect=o||Xt(e),c.willInsertAfter=r,c.originalEvent=s,t.dispatchEvent(c),u&&(l=u.call(d,c,s)),l}function xt(t){t.draggable=!1}function jt(){q=!1}function Tt(e,n,i){var o=0,s=0,r=e.children;while(s<r.length){if("none"!==r[s].style.display&&r[s]!==a&&r[s]!==t&&ht(r[s],i.draggable,e,!1)){if(o===n)return r[s];o++}s++}return null}function St(t){var e=t.lastElementChild;return e===a&&(e=t.children[t.childElementCount-2]),e||null}function Mt(t,e,a){var n=Xt(St(a)),i="vertical"===e?t.clientY:t.clientX,o="vertical"===e?t.clientX:t.clientY,s="vertical"===e?n.bottom:n.right,r="vertical"===e?n.left:n.top,c="vertical"===e?n.right:n.bottom;return o>r&&o<c&&i>s}function Dt(e,a,n,i,o,s,r){var c=Xt(a),l="vertical"===n?e.clientY:e.clientX,d="vertical"===n?c.height:c.width,u="vertical"===n?c.top:c.left,p="vertical"===n?c.bottom:c.right,h=Xt(t),f=!1;if(!s)if(r&&y<d*i)if(!O&&(1===C?l>u+d*o/2:l<p-d*o/2)&&(O=!0),O)f=!0;else{"vertical"===n?h.top:h.left,"vertical"===n?h.bottom:h.right;if(1===C?l<u+y:l>p-y)return-1*C}else if(l>u+d*(1-i)/2&&l<p-d*(1-i)/2)return l>u+d/2?-1:1;return f=f||s,f&&(l<u+d*o/2||l>p-d*o/2)?l>u+d/2?1:-1:0}function Ot(e,a){var n=It(t,a.draggable),i=It(e,a.draggable);return n<i?1:-1}function Et(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,a=e.length,n=0;while(a--)n+=e.charCodeAt(a);return n.toString(36)}function It(t,e){var a=0;if(!t||!t.parentNode)return-1;while(t&&(t=t.previousElementSibling))"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==n&&a++;return a}function Nt(t,e){if(t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(a){return!1}return!1}function $t(t,e){return function(){if(!dt){var a=arguments,n=this;dt=A(function(){1===a.length?t.call(n,a[0]):t.apply(n,a),dt=void 0},e)}}}function Pt(){clearTimeout(dt),dt=void 0}function Lt(t,e){if(t&&e)for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function At(t){return z&&z.dom?z.dom(t).cloneNode(!0):Y?Y(t).clone(!0)[0]:t.cloneNode(!0)}function Yt(t){G.length=0;var e=t.getElementsByTagName("input"),a=e.length;while(a--){var n=e[a];n.checked&&G.push(n)}}function zt(t){return A(t,0)}function Ft(t){return clearTimeout(t)}function Xt(t,e,a){if(t.getBoundingClientRect||t===$){var n,i,o,s,r,c,l;if(t!==$?(n=t.getBoundingClientRect(),i=n.top,o=n.left,s=n.bottom,r=n.right,c=n.height,l=n.width):(i=0,o=0,s=window.innerHeight,r=window.innerWidth,c=window.innerHeight,l=window.innerWidth),a&&t!==$){if(e=e||t.parentNode,!X)do{if(e&&e.getBoundingClientRect&&"none"!==kt(e,"transform")){var d=e.getBoundingClientRect();i-=d.top+L(kt(e,"border-top-width")),o-=d.left+L(kt(e,"border-left-width")),s=i+n.height,r=o+n.width;break}}while(e=e.parentNode);var u=_t(t),p=u&&u.a,h=u&&u.d;u&&(i/=h,o/=p,l/=p,c/=h,s=i+c,r=o+l)}return{top:i,left:o,bottom:s,right:r,width:l,height:c}}}function Bt(t,e){var a=et(a,!0),n=Xt(t)[e];while(a){var i,o=Xt(a)[e];if(i="top"===e||"left"===e?n>=o:n<=o,!i)return!0;if(a===$)break;a=et(a,!1)}return!1}return P.addEventListener("dragover",ut),P.addEventListener("mousemove",ut),pt.prototype={constructor:pt,_computeIsAligned:function(e){var n;if(a&&!H?(ct(),n=P.elementFromPoint(e.clientX,e.clientY),lt()):n=e.target,n=ht(n,this.options.draggable,this.el,!1),!U&&t&&t.parentNode===this.el){for(var i=this.el.children,o=0;o<i.length;o++)ht(i[o],this.options.draggable,this.el,!1)&&i[o]!==n&&(i[o].sortableMouseAligned=Q(e.clientX,e.clientY,i[o],this._getDirection(e,null),this.options));ht(n,this.options.draggable,this.el,!0)||(_=null),U=!0,A(function(){U=!1},30)}},_getDirection:function(e,a){return"function"===typeof this.options.direction?this.options.direction.call(this,e,a,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var a,n=this,i=this.el,o=this.options,r=o.preventOnFilter,c=e.type,l=e.touches&&e.touches[0],d=(l||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,p=o.filter;if(Yt(i),(!X||e.artificialBubble||st(i,d))&&!t&&!(/mousedown|pointerdown/.test(c)&&0!==e.button||o.disabled)&&!u.isContentEditable)if(d=ht(d,o.draggable,i,!1),d){if(s!==d){if(a=It(d,o.draggable),"function"===typeof p){if(p.call(this,e,d,this))return wt(n,u,"filter",d,i,i,a),void(r&&e.cancelable&&e.preventDefault())}else if(p&&(p=p.split(",").some(function(t){if(t=ht(u,t.trim(),i,!1),t)return wt(n,t,"filter",d,i,i,a),!0}),p))return void(r&&e.cancelable&&e.preventDefault());o.handle&&!ht(u,o.handle,i,!1)||this._prepareDragStart(e,l,d,a)}}else X&&rt(i,e,"_onTapStart")}},_handleAutoScroll:function(e,a){if(t&&this.options.scroll){var n=e.clientX,i=e.clientY,o=P.elementFromPoint(n,i),s=this;if(a||B||X){at(e,s.options,o,a);var r=et(o,!0);!T||f&&n===m&&i===v||(f&&clearInterval(f),f=setInterval(function(){if(t){var o=et(P.elementFromPoint(n,i),!0);o!==r&&(r=o,nt(),at(e,s.options,r,a))}},10),m=n,v=i)}else{if(!s.options.bubbleScroll||et(o,!0)===window)return void nt();at(e,s.options,et(o,!1),!1)}}},_prepareDragStart:function(a,n,r,c){var l,u=this,h=u.el,f=u.options,m=h.ownerDocument;r&&!t&&r.parentNode===h&&(i=h,t=r,e=t.parentNode,o=t.nextSibling,s=r,p=f.group,d=c,g={target:t,clientX:(n||a).clientX,clientY:(n||a).clientY},this._lastX=(n||a).clientX,this._lastY=(n||a).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",l=function(){u._disableDelayedDrag(),t.draggable=u.nativeDraggable,u._triggerDragStart(a,n),wt(u,i,"choose",t,i,i,d),bt(t,f.chosenClass,!0)},f.ignore.split(",").forEach(function(e){Ct(t,e.trim(),xt)}),f.supportPointer?(vt(m,"pointerup",u._onDrop),vt(m,"pointercancel",u._onDrop)):(vt(m,"mouseup",u._onDrop),vt(m,"touchend",u._onDrop),vt(m,"touchcancel",u._onDrop)),f.delay?(vt(m,"mouseup",u._disableDelayedDrag),vt(m,"touchend",u._disableDelayedDrag),vt(m,"touchcancel",u._disableDelayedDrag),vt(m,"mousemove",u._delayedDragTouchMoveHandler),vt(m,"touchmove",u._delayedDragTouchMoveHandler),f.supportPointer&&vt(m,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=A(l,f.delay)):l())},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;W(V(e.clientX-this._lastX),V(e.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),gt(t,"mouseup",this._disableDelayedDrag),gt(t,"touchend",this._disableDelayedDrag),gt(t,"touchcancel",this._disableDelayedDrag),gt(t,"mousemove",this._delayedDragTouchMoveHandler),gt(t,"touchmove",this._delayedDragTouchMoveHandler),gt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,a){a=a||("touch"==e.pointerType?e:null),!this.nativeDraggable||a?this.options.supportPointer?vt(P,"pointermove",this._onTouchMove):vt(P,a?"touchmove":"mousemove",this._onTouchMove):(vt(t,"dragend",this),vt(i,"dragstart",this._onDragStart));try{P.selection?zt(function(){P.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e){if(S=!1,i&&t){this.nativeDraggable&&(vt(P,"dragover",this._handleAutoScroll),vt(P,"dragover",ot));var a=this.options;!e&&bt(t,a.dragClass,!1),bt(t,a.ghostClass,!0),kt(t,"transform",""),pt.active=this,e&&this._appendGhost(),wt(this,i,"start",t,i,i,d)}else this._nulling()},_emulateDragOver:function(e){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY&&!e)return;this._lastX=b.clientX,this._lastY=b.clientY,ct();var a=P.elementFromPoint(b.clientX,b.clientY),n=a;while(a&&a.shadowRoot)a=a.shadowRoot.elementFromPoint(b.clientX,b.clientY),n=a;if(n)do{var i;if(n[N])if(i=n[N]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:a,rootEl:n}),i&&!this.options.dragoverBubble)break;a=n}while(n=n.parentNode);t.parentNode[N]._computeIsAligned(b),lt()}},_onTouchMove:function(t){if(g){if(!t.cancelable)return;var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=a&&_t(a),r=a&&s&&s.a,c=a&&s&&s.d,l=(o.clientX-g.clientX+i.x)/(r||1),d=(o.clientY-g.clientY+i.y)/(c||1),u=t.touches?"translate3d("+l+"px,"+d+"px,0)":"translate("+l+"px,"+d+"px)";if(!pt.active&&!S){if(n&&W(V(o.clientX-this._lastX),V(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}this._handleAutoScroll(o,!0),k=!0,b=o,kt(a,"webkitTransform",u),kt(a,"mozTransform",u),kt(a,"msTransform",u),kt(a,"transform",u),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!a){var e=Xt(t,this.options.fallbackOnBody?P.body:i,!0),n=(kt(t),this.options);a=t.cloneNode(!0),bt(a,n.ghostClass,!1),bt(a,n.fallbackClass,!0),bt(a,n.dragClass,!0),kt(a,"box-sizing","border-box"),kt(a,"margin",0),kt(a,"top",e.top),kt(a,"left",e.left),kt(a,"width",e.width),kt(a,"height",e.height),kt(a,"opacity","0.8"),kt(a,"position","fixed"),kt(a,"zIndex","100000"),kt(a,"pointerEvents","none"),n.fallbackOnBody&&P.body.appendChild(a)||i.appendChild(a)}},_onDragStart:function(e,a){var o=this,s=e.dataTransfer,r=o.options;n=At(t),n.draggable=!1,n.style["will-change"]="",this._hideClone(),bt(n,o.options.chosenClass,!1),o._cloneId=zt(function(){o.options.removeCloneOnHide||i.insertBefore(n,t),wt(o,i,"clone",t)}),!a&&bt(t,r.dragClass,!0),a?(M=!0,o._loopId=setInterval(o._emulateDragOver,50)):(gt(P,"mouseup",o._onDrop),gt(P,"touchend",o._onDrop),gt(P,"touchcancel",o._onDrop),gt(P,"pointercancel",o._onDrop),s&&(s.effectAllowed="move",r.setData&&r.setData.call(o,s,t)),vt(P,"drop",o),kt(t,"transform","translateZ(0)")),S=!0,o._dragStartId=zt(o._dragStarted.bind(o,a)),vt(P,"selectstart",o)},_onDragOver:function(n){var s,r,c,l=this.el,u=n.target,f=this.options,m=f.group,v=pt.active,g=p===m,b=f.sort,j=this;if(!q&&(!X||n.rootEl||n.artificialBubble||st(l,u))){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),k=!0,u=ht(u,f.draggable,l,!0),ht(n.target,null,t,!0)||u.animated)return R();if(u!==t&&(M=!1),v&&!f.disabled&&(g?b||(c=!i.contains(t)):h===this||(this.lastPutMode=p.checkPull(this,v,t,n))&&m.checkPut(this,v,t,n))){var S=this._getDirection(n,u);if(s=Xt(t),c)return this._hideClone(),e=i,o?i.insertBefore(t,o):i.appendChild(t),R();if(0===l.children.length||l.children[0]===a||Mt(n,S,l)&&!t.animated){if(0!==l.children.length&&l.children[0]!==a&&l===n.target&&(u=St(l)),u&&(r=Xt(u)),g?v._hideClone():v._showClone(this),!1!==yt(i,l,t,s,u,r,n,!!u))return l.appendChild(t),e=l,x=null,K(),this._animate(s,t),u&&this._animate(r,u),R()}else if(u&&u!==t&&void 0!==u.parentNode[N]&&u!==l){var D,I=0,$=u.sortableMouseAligned,L=t.parentNode!==l,Y=Bt(u,"vertical"===S?"top":"left");if(_!==u&&(w=null,D=Xt(u)["vertical"===S?"top":"left"],O=!1),tt(t,u,S)&&$||L||Y||f.invertSwap||"insert"===w||"swap"===w?("swap"!==w&&(E=f.invertSwap||L||T||Y),I=Dt(n,u,S,f.swapThreshold,null==f.invertedSwapThreshold?f.swapThreshold:f.invertedSwapThreshold,E,_===u),w="swap"):(I=Ot(u,f),w="insert"),0===I)return R();x=null,_=u,C=I,r=Xt(u);var z=u.nextElementSibling,F=!1;F=1===I;var B=yt(i,l,t,s,u,r,n,F);if(!1!==B)return 1!==B&&-1!==B||(F=1===B),q=!0,A(jt,30),g?v._hideClone():v._showClone(this),F&&!z?l.appendChild(t):u.parentNode.insertBefore(t,F?z:u),e=t.parentNode,void 0===D||E||(y=V(D-Xt(u)["vertical"===S?"top":"left"])),K(),!L&&this._animate(r,u),this._animate(s,t),R()}if(l.contains(t))return R()}return X&&!n.rootEl&&rt(l,n,"_onDragOver"),!1}function R(){return v&&(bt(t,h?h.options.ghostClass:v.options.ghostClass,!1),bt(t,f.ghostClass,!0)),h!==j&&j!==pt.active?h=j:j===pt.active&&(h=null),(u===t&&!t.animated||u===l&&!u.animated)&&(_=null),f.dragoverBubble||n.rootEl||u===P||(j._handleAutoScroll(n),t.parentNode[N]._computeIsAligned(n)),!f.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),!0}function K(){wt(j,i,"change",u,l,i,d,It(t,f.draggable),n)}},_animate:function(e,a){var n=this.options.animation;if(n){var i=Xt(a);if(a===t&&(x=i),1===e.nodeType&&(e=Xt(e)),e.left+e.width/2!==i.left+i.width/2||e.top+e.height/2!==i.top+i.height/2){var o=_t(this.el),s=o&&o.a,r=o&&o.d;kt(a,"transition","none"),kt(a,"transform","translate3d("+(e.left-i.left)/(s||1)+"px,"+(e.top-i.top)/(r||1)+"px,0)"),a.offsetWidth,kt(a,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),kt(a,"transform","translate3d(0,0,0)")}"number"===typeof a.animated&&clearTimeout(a.animated),a.animated=A(function(){kt(a,"transition",""),kt(a,"transform",""),a.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;gt(P,"touchmove",this._onTouchMove),gt(P,"pointermove",this._onTouchMove),gt(t,"mouseup",this._onDrop),gt(t,"touchend",this._onDrop),gt(t,"pointerup",this._onDrop),gt(t,"touchcancel",this._onDrop),gt(t,"pointercancel",this._onDrop),gt(P,"selectstart",this)},_onDrop:function(s){var r=this.el,c=this.options;S=!1,T=!1,E=!1,O=!1,clearInterval(this._loopId),clearInterval(f),nt(),Pt(),clearTimeout(this._dragStartTimer),Ft(this._cloneId),Ft(this._dragStartId),gt(P,"mousemove",this._onTouchMove),this.nativeDraggable&&(gt(P,"drop",this),gt(r,"dragstart",this._onDragStart),gt(P,"dragover",this._handleAutoScroll),gt(P,"dragover",ot)),this._offUpEvents(),s&&(k&&(s.cancelable&&s.preventDefault(),!c.dropBubble&&s.stopPropagation()),a&&a.parentNode&&a.parentNode.removeChild(a),(i===e||h&&"clone"!==h.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),t&&(this.nativeDraggable&&gt(t,"dragend",this),xt(t),t.style["will-change"]="",bt(t,h?h.options.ghostClass:this.options.ghostClass,!1),bt(t,this.options.chosenClass,!1),wt(this,i,"unchoose",t,e,i,d,null,s),i!==e?(u=It(t,c.draggable),u>=0&&(wt(null,e,"add",t,e,i,d,u,s),wt(this,i,"remove",t,e,i,d,u,s),wt(null,e,"sort",t,e,i,d,u,s),wt(this,i,"sort",t,e,i,d,u,s)),h&&h.save()):t.nextSibling!==o&&(u=It(t,c.draggable),u>=0&&(wt(this,i,"update",t,e,i,d,u,s),wt(this,i,"sort",t,e,i,d,u,s))),pt.active&&(null!=u&&-1!==u||(u=d),wt(this,i,"end",t,e,i,d,u,s),this.save()))),this._nulling()},_nulling:function(){i=t=e=a=o=n=s=r=c=j.length=f=m=v=g=b=k=u=d=_=C=x=h=p=pt.active=null,G.forEach(function(t){t.checked=!0}),G.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),mt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var t,e=[],a=this.el.children,n=0,i=a.length,o=this.options;n<i;n++)t=a[n],ht(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Et(t));return e},sort:function(t){var e={},a=this.el;this.toArray().forEach(function(t,n){var i=a.children[n];ht(i,this.options.draggable,a,!1)&&(e[t]=i)},this),t.forEach(function(t){e[t]&&(a.removeChild(e[t]),a.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return ht(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var a=this.options;if(void 0===e)return a[t];a[t]=e,"group"===t&&it(a)},destroy:function(){var t=this.el;t[N]=null,gt(t,"mousedown",this._onTapStart),gt(t,"touchstart",this._onTapStart),gt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(gt(t,"dragover",this),gt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),D.splice(D.indexOf(this.el),1),this.el=t=null},_hideClone:function(){n.cloneHidden||(kt(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(e){"clone"===e.lastPutMode?n.cloneHidden&&(i.contains(t)&&!this.options.group.revertClone?i.insertBefore(n,t):o?i.insertBefore(n,o):i.appendChild(n),this.options.group.revertClone&&this._animate(t,n),kt(n,"display",""),n.cloneHidden=!1):this._hideClone()}},vt(P,"touchmove",function(t){(pt.active||S)&&t.cancelable&&t.preventDefault()}),pt.utils={on:vt,off:gt,css:kt,find:Ct,is:function(t,e){return!!ht(t,e,t,!1)},extend:Lt,throttle:$t,closest:ht,toggleClass:bt,clone:At,index:It,nextTick:zt,cancelNextTick:Ft,detectDirection:J,getChild:Tt},pt.create=function(t,e){return new pt(t,e)},pt.version="1.8.1",pt})},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),i=a("d8e8"),o=a("4bf8"),s=a("79e5"),r=[].sort,c=[1,2,3];n(n.P+n.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(o(this)):r.call(o(this),i(t))}})},"58bf":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tabs",{attrs:{tabPosition:"left",defaultActiveKey:"1",animated:!1},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"heat-map"}}),t._v("\n                    概览\n                ")],1),a("div",{staticClass:"config-content"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目封面")]),a("div",{staticClass:"cover-item"},[t.project.cover?[a("img",{staticClass:"avatar",attrs:{src:t.project.cover}})]:t._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.project.cover,expression:"!project.cover"}],staticClass:"no-avatar"}),a("a-upload",{staticClass:"cover-uploader",attrs:{name:"cover",showUploadList:!1,action:t.uploadAction,beforeUpload:t.beforeUpload},on:{change:t.handleChange}},[a("a-button",{staticClass:"upload",attrs:{size:"large"}},[t._v("上传新封面")]),a("p",{staticClass:"upload-tips muted"},[t._v("最佳图片比例为300*150")])],1)],2)])]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目名称")]),a("a-input",{attrs:{size:"large"},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}})],1),a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目进度 (%)")]),a("a-input-number",{attrs:{size:"large",min:0,max:100},model:{value:t.project.schedule,callback:function(e){t.$set(t.project,"schedule",e)},expression:"project.schedule"}})],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目简介")]),a("a-input",{attrs:{type:"textarea",rows:3,size:"large",placeholder:"介绍一下这个项目"},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}})],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目公开性")]),a("a-select",{attrs:{size:"large"},model:{value:t.project.private,callback:function(e){t.$set(t.project,"private",e)},expression:"project.private"}},[a("a-select-option",{key:0},[t._v("\n                            公开项目（所有人都可通过链接访问，仅项目成员可编辑）\n                        ")]),a("a-select-option",{key:1},[t._v("\n                            私有项目（仅项目成员可查看和编辑）\n                        ")])],1)],1)]),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目拥有者")]),a("div",{staticClass:"m-t"},[a("a-avatar",{attrs:{src:t.project.owner_avatar}}),a("span",{staticClass:"m-l"},[t._v(t._s(t.project.owner_name))]),a("a-button",{staticClass:"middle-btn pull-right",attrs:{size:"large"}},[t._v("\n                            移交\n                        ")])],1)])]),a("a-divider"),a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("a-button",{staticClass:"middle-btn pull-right",attrs:{type:"primary",size:"large"},on:{click:t.saveProject}},[t._v("\n                        保存\n                    ")])],1)])],1)]),a("a-tab-pane",{key:"3"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"check-square"}}),t._v("\n                    任务设置\n                ")],1),a("div",{staticClass:"config-content task-config"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目ID")]),a("div",{staticClass:"item-tips muted"},[t._v("设置项目编号，编号将作为 ID 前缀，用以区别项目。支持 2-6 位字母。")]),a("a-input",{staticClass:"prefix-input",attrs:{size:"large",placeholder:"如 Pear Project 可以设置为 EP",disabled:!t.project.open_prefix},model:{value:t.project.prefix,callback:function(e){t.$set(t.project,"prefix",e)},expression:"project.prefix"}}),a("a-button",{staticClass:"middle-btn",attrs:{size:"large",type:"primary",disabled:!t.project.open_prefix},on:{click:t.saveProject}},[t._v("保存\n                    ")])],1),a("a-switch",{on:{change:t.saveProject},model:{value:t.project.open_prefix,callback:function(e){t.$set(t.project,"open_prefix",e)},expression:"project.open_prefix"}})],1)])]),a("a-tab-pane",{key:"4"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"ellipsis"}}),t._v("\n                    更多\n                ")],1),a("div",{staticClass:"config-content more-config"},[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("p",{staticClass:"item-title"},[t._v("项目操作")]),a("div",{staticClass:"item-tips muted"},[t._v("您可以执行以下操作")]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large"},on:{click:t.archiveProject}},[t.project.archive?a("span",[t._v("取消归档")]):t._e(),t.project.archive?t._e():a("span",[t._v("归档项目")])]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large"},on:{click:t.quitProject}},[t._v("退出")]),a("a-button",{staticClass:"middle-btn",attrs:{size:"large",type:"danger"},on:{click:t.delProject}},[t.project.deleted?a("span",[t._v("恢复项目")]):t._e(),t.project.deleted?t._e():a("span",[t._v("移至回收站")])])],1)])])])],1)},i=[],o=a("795b"),s=a.n(o),r=(a("a481"),a("c5f6"),a("7f7f"),a("24d2")),c=a("97a8"),l=a("2f14"),d={name:"projectConfig",props:{code:{type:[String],default:function(){return""}}},data:function(){return{loading:!1,tabKey:"1",project:{},uploadLoading:!1,uploadAction:Object(l["c"])("project/project/uploadCover")}},watch:{code:function(){this.getProject()}},created:function(){this.getProject()},methods:{getProject:function(){var t=this;this.loading=!0,Object(r["e"])(this.code).then(function(e){t.loading=!1,t.project=e.data,t.project.open_prefix=!!e.data.open_prefix})},saveProject:function(){var t=this,e=this.project;Object(r["b"])({projectCode:e.code,name:e.name,description:e.description,cover:e.cover,private:e.private,prefix:e.prefix,open_prefix:Number(e.open_prefix),schedule:Number(e.schedule)}).then(function(e){Object(l["a"])(e)&&(t.$emit("update",t.project),Object(c["b"])({title:"保存成功"},"notice","success"))})},archiveProject:function(){var t=this;t.project.archive?this.$confirm({title:"取消归档项目？",content:"取消归档「".concat(this.project.name,"」后就可以正常使用了"),okText:"取消归档",okType:"primary",cancelText:"再想想",onOk:function(){return Object(r["g"])(t.code).then(function(e){Object(l["a"])(e)&&t.$router.replace("/project/list/my")}),s.a.resolve()}}):this.$confirm({title:"归档项目",content:"一旦将项目「".concat(this.project.name,"」归档，本项目和所含信息将会被移到「归档项目」内，其中的内容依然会被统计和搜索收录，归档项目可以随时恢复并继续使用。"),okText:"归档",okType:"danger",cancelText:"再想想",onOk:function(){return Object(r["a"])(t.code).then(function(e){Object(l["a"])(e)&&t.$router.replace("/project/archive")}),s.a.resolve()}})},delProject:function(){var t=this;t.project.deleted?this.$confirm({title:"确定恢复项目？",content:"恢复「".concat(this.project.name,"」后就可以正常使用了"),okText:"恢复项目",okType:"primary",cancelText:"再想想",onOk:function(){return Object(r["f"])(t.code).then(function(e){Object(l["a"])(e)&&t.$router.replace("/project/list/my")}),s.a.resolve()}}):this.$confirm({title:"确定放入回收站？",content:"一旦将项目「".concat(this.project.name,"」放入回收站，所有与项目有关的信息将会被放入回收站"),okText:"放入回收站",okType:"danger",cancelText:"再想想",onOk:function(){return Object(r["h"])(t.code).then(function(e){Object(l["a"])(e)&&t.$router.replace("/project/recycle")}),s.a.resolve()}})},quitProject:function(){var t=this;this.$confirm({title:"退出项目",content:"一旦你退出了该项目，你将不能查看任何关于该项目的信息。退出项目后，如果想重新加入，请联系项目管理员。",okText:"确定退出",okType:"primary",cancelText:"再想想",onOk:function(){return Object(r["d"])(t.code).then(function(e){Object(l["a"])(e)&&t.$router.replace("/project/list/my")}),s.a.resolve()}})},handleChange:function(t){var e=this;"uploading"!==t.file.status?"done"===t.file.status&&Object(l["e"])(t.file.originFileObj,function(){e.project.cover=t.file.response.data.url,e.uploadLoading=!1,Object(c["b"])({title:"封面上传成功"},"notice","success")}):this.uploadLoading=!0},beforeUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("图片不能超过2MB!"),e}}},u=d,p=(a("9c6f"),a("2877")),h=Object(p["a"])(u,n,i,!1,null,null,null);h.options.__file="projectConfig.vue";e["a"]=h.exports},"9c6f":function(t,e,a){"use strict";var n=a("39bf"),i=a.n(n);i.a},c9b7:function(t,e,a){"use strict";var n=a("1478"),i=a.n(n);i.a},d96e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-space-task"},[a("div",{staticClass:"project-navigation"},[a("div",{staticClass:"project-nav-header"},[a("a-breadcrumb",[a("a-breadcrumb-item",[a("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.project.name}},[a("span",{staticClass:"nav-title"},[t._v(t._s(t.project.name))])]),a("span",{staticClass:"actions"},[a("a-tooltip",{attrs:{mouseEnterDelay:.3,title:t.project.collected?"取消收藏":"加入收藏"},on:{click:t.collectProject}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:!t.project.collected,expression:"!project.collected"}],staticStyle:{color:"grey"},attrs:{type:"star",theme:"filled"}}),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.project.collected,expression:"project.collected"}],staticStyle:{color:"#ffaf38"},attrs:{type:"star",theme:"filled"}})],1)],1),0===t.project.private?a("span",{staticClass:"label label-normal"},[a("a-icon",{attrs:{type:"global"}}),t._v(" 公开")],1):t._e()],1)],1)],1),a("section",{staticClass:"nav-body"},[a("ul",{staticClass:"nav-wrapper nav nav-underscore pull-left"},[t._m(0),a("li",{},[a("a",{staticClass:"app",attrs:{"data-app":"works"},on:{click:function(e){t.$router.push("/project/space/files/"+t.project.code)}}},[t._v("\n                    文件")])]),a("li",{},[a("a",{staticClass:"app",attrs:{"data-app":"build"},on:{click:function(e){t.$router.push("/project/space/overview/"+t.project.code)}}},[t._v("\n                    概览")])]),a("li",{},[a("a",{staticClass:"app",attrs:{"data-app":"build"},on:{click:function(e){t.$router.push("/project/build/"+t.project_id)}}},[t._v("\n                    版本 * ")])])])]),a("div",{staticClass:"project-nav-footer"},[a("a",{staticClass:"footer-item",on:{click:t.changeViewMode}},[a("a-icon",{attrs:{type:"menu"}}),a("span",[t._v(t._s(t.table_modal?" 看板视图":" 列表视图"))])],1),a("a",{staticClass:"footer-item",class:{active:"member"==t.slideMenuKey},on:{click:function(e){t.visibleDraw("member")}}},[a("a-icon",{attrs:{type:"user"}}),a("span",[t._v(" "+t._s(t.projectMembers.length))])],1),a("a",{staticClass:"footer-item",class:{active:"config"==t.slideMenuKey},on:{click:function(e){t.visibleDraw("config")}}},[a("a-icon",{attrs:{type:"menu"}}),a("span",[t._v(" 菜单")])],1)])]),a("wrapper-content",{attrs:{showHeader:!1}},[a("draggable",{directives:[{name:"show",rawName:"v-show",value:!t.table_modal,expression:"!table_modal"}],staticClass:"board-scrum-stages",attrs:{options:{group:"stages",filter:".undraggables",handle:".ui-sortable-handle",ghostClass:"stage-ghost",animation:200,forceFallback:!1},id:"board-scrum-stages",move:t.stageMove},on:{update:t.stageSort},model:{value:t.taskStages,callback:function(e){t.taskStages=e},expression:"taskStages"}},[t._l(t.taskStages,function(e,n){return a("div",{key:n,staticClass:"scrum-stage",class:{"fixed-creator":1==e.fixedCreator},attrs:{id:e.code}},[a("header",{directives:[{name:"show",rawName:"v-show",value:!e.tasksLoading,expression:"!stage.tasksLoading"}],staticClass:"scrum-stage-header ui-sortable-handle"},[a("div",{staticClass:"stage-name hinted"},[t._v("\n                        "+t._s(e.name)+"\n                        "),e.tasks.length>0?a("span",{staticClass:"task-count"},[t._v(" · "+t._s(e.tasks.length))]):t._e()]),a("div",{staticClass:"stage-menu-toggler popover"},[a("a-dropdown",{attrs:{trigger:["click"],placement:"bottomCenter"}},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("编辑任务列表")])]),a("a",{staticClass:"menu-toggler-title",attrs:{href:"javascript:void(0)"}},[a("a-icon",{staticStyle:{"font-size":"18px"},attrs:{type:"down-circle"}})],1)],2),a("a-menu",{attrs:{slot:"overlay",selectable:!1},on:{click:t.doStage},slot:"overlay"},[a("a-menu-item",{key:"editStage_"+e.code+"_"+n},[a("a-icon",{attrs:{type:"edit"}}),t._v("\n                                    编辑列表\n                                ")],1),a("a-menu-item",{key:"setExecutor_"+e.code+"_"+n},[a("a-icon",{attrs:{size:"14",type:"user"}}),t._v("\n                                    设置本列所有任务执行者\n                                ")],1),a("a-menu-item",{key:"recycleBatch_"+e.code+"_"+n},[a("a-icon",{attrs:{size:"14",type:"delete"}}),t._v("\n                                    本列所有任务移到回收站\n                                ")],1),a("a-menu-item",{key:"delStage_"+e.code+"_"+n},[a("a-icon",{attrs:{size:"14",type:"delete"}}),t._v("\n                                    删除列表\n                                ")],1)],1)],1)],1)]),a("div",{staticClass:"scrum-stage-wrap ui-sortable",class:{"hidden-creator-bottom":e.showTaskCard}},[a("vue-scroll",{ref:n+"-stage",refInFor:!0,attrs:{ops:t.scrollOps},on:{"handle-resize":function(e){t.handleResize(e,n)}}},[a("section",{staticClass:"scrum-stage-content thin-scroll",attrs:{id:e.code,"task-type-index":n}},[a("a-spin",{attrs:{wrapperClassName:"tasks-loading",spinning:e.tasksLoading}},[a("draggable",{staticClass:"scrum-stage-tasks",attrs:{options:{group:"task",ghostClass:"task-ghost",dragClass:"task-drag",fallbackClass:"task-drag",forceFallback:!1}},on:{end:t.taskSort},model:{value:e.unDoneTasks,callback:function(a){t.$set(e,"unDoneTasks",a)},expression:"stage.unDoneTasks"}},[t._l(e.unDoneTasks,function(e,i){return[!e.done&&e.canRead?a("div",{key:e.code,staticClass:"task task-card ui-sortable-handle",class:t.showTaskPri(e.pri),attrs:{index:i,id:e.code},on:{click:function(a){a.stopPropagation(),t.taskDetail(e.code,n)}}},[a("div",{staticClass:"task-priority bg-priority-0"}),a("a-tooltip",{attrs:{placement:n>0?"top":"right"}},[a("template",{slot:"title"},[e.hasUnDone?a("span",{staticStyle:{"font-size":"12px"}},[t._v("子任务尚未全部完成，无法完成父任务")]):t._e()]),a("a",{staticClass:"check-box",class:{disabled:e.hasUnDone},on:{click:function(a){a.stopPropagation(),t.taskDone(e.code,n,i,1)}}})],2),a("div",{staticClass:"task-content-set open-detail"},[a("div",{staticClass:"task-content-wrapper"},[a("div",{staticClass:"task-content"},[t._v(" "+t._s(e.name))]),e.executor&&e.executor.avatar?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e.executor.name))])]),a("img",{staticClass:"avatar img-circle img-24 hinted",attrs:{src:e.executor.avatar,title:e.executor.name}})],2):t._e()],1),a("div",{staticClass:"task-info-wrapper clearfix"},[a("div",{staticClass:"task-infos"},[e.end_time?a("span",{staticClass:"label",class:t.showTimeLabel(e.end_time)},[a("span",{attrs:{title:e.end_time}},[t._v("\n                                                           "+t._s(t.showTaskTime(e.begin_time,e.end_time))+"\n                                                        ")])]):t._e(),e.description?a("span",{staticClass:"icon-wrapper muted"},[a("a-icon",{attrs:{type:"file-text"}})],1):t._e(),e.hasSource?a("span",{staticClass:"icon-wrapper muted"},[a("a-icon",{attrs:{type:"link"}})],1):t._e(),e.hasComment?a("span",{staticClass:"icon-wrapper muted"},[a("a-icon",{attrs:{type:"message"}})],1):t._e(),e.childCount[0]>0?a("span",{staticClass:"icon-wrapper muted"},[a("a-icon",{attrs:{type:"bars"}}),a("span",[t._v(t._s(e.childCount[1])+"/"+t._s(e.childCount[0]))])],1):t._e(),t._l(e.tags,function(e){return a("span",{key:e.code,staticClass:"tag muted"},[a("a-badge",{class:"badge-"+e.tag.color,attrs:{status:"success"}}),t._v("\n                                                           "+t._s(e.tag.name)+"\n                                                       ")],1)}),e.execute_state>0?a("span",{class:"icon-wrapper text text-"+e.task_execute.color},[t._v(t._s(e.task_execute_name))]):t._e(),e.like?a("span",{staticClass:"icon-wrapper muted"},[a("a-icon",{attrs:{type:"like"}}),a("span",[t._v(t._s(e.like))])],1):t._e()],2)]),t.project.prefix&&t.project.open_prefix?a("footer",{staticClass:"task-info-footer"},[a("span",{staticClass:"task-id-number"},[t._v("\n                                                        "+t._s(t.project.prefix)+"-"+t._s(e.id_num)+"\n                                                    ")])]):t._e()])],1):t._e()]})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTaskCard,expression:"stage.showTaskCard"}],staticClass:"task-creator-wrap card",attrs:{id:"card"+n}},[a("form",{staticClass:"task-creator"},[a("a-input",{ref:"inputTaskName"+n,refInFor:!0,staticClass:"task-content-input",attrs:{type:"textarea",rows:3,placeholder:"任务内容"},on:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key,"Enter"))return null;t.createTask(e.code,n)}},model:{value:t.task.name,callback:function(e){t.$set(t.task,"name",e)},expression:"task.name"}}),a("div",{staticClass:"handler-wrap"},[a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"executor-handler"},[a("img",{staticClass:"avatar img-circle img-24 hinted",attrs:{src:t.defaultExecutor.avatar}}),a("span",{staticClass:"creator-handler-text name"},[t._v(t._s(t.defaultExecutor.name))])]),a("a-menu",{staticClass:"executor-handler-menu",attrs:{slot:"overlay"},on:{click:t.selectExecutor},slot:"overlay"},t._l(t.projectMembers,function(e,n){return a("a-menu-item",{key:n},[a("img",{staticClass:"avatar img-circle img-32 pull-left m-r-sm ",attrs:{src:e.avatar}}),a("span",{staticClass:"muted",staticStyle:{"line-height":"25px"}},[t._v(t._s(e.name))]),e.code==t.defaultExecutor.code?a("a-icon",{staticClass:"muted",attrs:{type:"check"}}):t._e()],1)}),1)],1)],1),a("div",{staticClass:"submit-set"},[a("a-button",{staticClass:"middle-btn",attrs:{type:"default",size:"large"},on:{click:function(e){e.stopPropagation(),t.showTaskCard(n,!1)}}},[t._v("取消\n                                            ")]),a("a-button",{staticClass:"middle-btn",class:{"disabled-btn":!t.task.name},attrs:{loading:t.createTaskLoading,disabled:!t.task.name,type:"primary",size:"large"},on:{click:function(a){a.stopPropagation(),t.createTask(e.code,n)}}},[t._v("创建\n                                            ")])],1)],1)]),a("draggable",{staticClass:"scrum-stage-tasks-done",attrs:{options:{group:"task-done",ghostClass:"task-ghost",dragClass:"task-drag",fallbackClass:"task-drag",forceFallback:!1}},on:{end:t.taskSort},model:{value:e.doneTasks,callback:function(a){t.$set(e,"doneTasks",a)},expression:"stage.doneTasks"}},[t._l(e.doneTasks,function(e,i){return[e.canRead?a("div",{key:e.code,staticClass:"task done task-card ui-sortable-handle",attrs:{index:i,id:e.code},on:{click:function(a){a.stopPropagation(),t.taskDetail(e.code,n)}}},[a("div",{staticClass:"task-priority bg-priority-0"}),a("a",{staticClass:"check-box",on:{click:function(a){a.stopPropagation(),t.taskDone(e.code,n,i,0)}}},[a("a-icon",{attrs:{type:"check"}})],1),a("div",{staticClass:"task-content-set open-detail"},[a("div",{staticClass:"task-content-wrapper"},[a("div",{staticClass:"task-content"},[t._v(t._s(e.name))]),e.executor&&e.executor.avatar?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v(t._s(e.executor.name))])]),e.executor&&e.executor.avatar?a("img",{staticClass:"avatar img-circle img-24 hinted",attrs:{src:e.executor.avatar,title:e.executor.name}}):t._e()],2):t._e()],1),a("div",{staticClass:"task-info-wrapper clearfix"},[a("div",{staticClass:"task-infos"},t._l(e.task_tag_item_list,function(e,n){return a("span",{key:e.code,staticClass:"tag muted",class:"tag-color-"+e.color},[t._v(" "+t._s(e.name)+" ")])}),0)])])]):t._e()]})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.canNotReadCount,expression:"stage.canNotReadCount"}],staticClass:"scrum-stage-tasks-done"},[a("li",{staticClass:"task muted",staticStyle:{margin:"0 10px 8px"}},[a("span",[a("a-icon",{attrs:{type:"lock"}}),t._v("\n                                            有 "+t._s(e.canNotReadCount)+" 个任务被隐藏（因为设置了仅参与者可见）")],1)])]),e.showTaskCard?t._e():a("div",{staticClass:"task-creator-handler-wrap",on:{click:function(e){e.stopPropagation(),t.showTaskCard(n)}}},[a("a",{staticClass:"task-creator-handler link-add-handler"},[a("a-icon",{staticStyle:{"padding-right":"6px"},attrs:{type:"plus-circle"}}),t._v("\n                                        添加任务\n                                    ")],1)])],1)],1)])],1)])}),a("div",{staticClass:"scrum-stage undraggable create-stage"},[a("header",{staticClass:"scrum-stage-header"},[a("div",{staticClass:"stage-name hinted",staticStyle:{width:"100%"}},[a("a",{directives:[{name:"show",rawName:"v-show",value:!t.showCreateStage,expression:"!showCreateStage"}],staticClass:"muted",on:{click:t.showInputStrageName}},[a("span",{staticClass:"ivu-icon ivu-icon-plus"}),a("span",[t._v("新建任务列表...")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCreateStage,expression:"showCreateStage"}]},[a("div",[a("a-input",{ref:"inputStageName",attrs:{placeholder:"新建任务列表...","auto-focus":""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.creteStage(e):null}},model:{value:t.stageName,callback:function(e){t.stageName=e},expression:"stageName"}})],1),a("div",{staticClass:"submit-set create-stage-footer"},[a("a",{staticClass:"cancel-text muted",attrs:{type:"text"},on:{click:function(e){t.showCreateStage=!t.showCreateStage}}},[t._v("\n                                    取消\n                                ")]),a("a-button",{staticClass:"middle-btn",attrs:{type:"primary"},on:{click:t.creteStage}},[t._v("保存")])],1)])])])])],2),a("div",{directives:[{name:"show",rawName:"v-show",value:t.table_modal,expression:"table_modal"}],staticClass:"container",staticStyle:{height:"100%",padding:"15px 25px 0 25px",overflow:"auto"}},[a("a-table",{attrs:{columns:t.columns,bordered:"",scroll:{y:560},rowKey:function(t){return t.login.uuid},dataSource:t.tableData,pagination:!1,loading:t.loading},on:{change:t.handleTableChange}})],1),a("router-view")],1),a("a-modal",{attrs:{width:360,title:t.stageModal.modalTitle,bodyStyle:{paddingBottom:"1px"},footer:null},model:{value:t.stageModal.modalStatus,callback:function(e){t.$set(t.stageModal,"modalStatus",e)},expression:"stageModal.modalStatus"}},[a("a-form",{attrs:{form:t.stageModal.form},on:{submit:function(e){return e.preventDefault(),t.editStage(e)}}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入列表标题"}]}],expression:"[\n                                        'name',\n                                        {rules: [{ required: true, message: '请输入列表标题' }]}\n                                        ]"}],ref:"inputStageTitle",attrs:{placeholder:"列表标题"}})],1),a("a-form-item",[a("div",{staticClass:"action-btn pull-right"},[a("a",{staticClass:"cancel-text muted",attrs:{type:"text"},on:{click:function(e){t.stageModal.modalStatus=!1}}},[t._v("\n                        取消\n                    ")]),a("a-button",{staticClass:"middle-btn",attrs:{type:"primary",htmlType:"submit"}},[t._v("保存")])],1)])],1)],1),a("a-drawer",{attrs:{wrapClassName:"info-drawer",title:"项目成员",width:"350",placement:"right",visible:t.inviteMemberDraw.visible},on:{close:function(e){t.inviteMemberDraw.visible=!1}}},[a("div",{staticClass:"search-content"},[a("a-input",{attrs:{size:"large",placeholder:"输入昵称或邮箱查找"},model:{value:t.inviteMemberDraw.keyword,callback:function(e){t.$set(t.inviteMemberDraw,"keyword",e)},expression:"inviteMemberDraw.keyword"}},[a("a-icon",{attrs:{slot:"prefix",type:"search"},slot:"prefix"})],1)],1),a("div",{staticClass:"member-list"},[a("div",{staticClass:"member-list-item ant-list-item header-action"},[a("div",{staticClass:"ant-list-item-meta",on:{click:function(e){t.showInviteMember=!0}}},[a("div",{staticClass:"ant-list-item-meta-avatar"},[a("a-avatar",{attrs:{icon:"plus"}})],1),a("div",{staticClass:"ant-list-item-meta-content"},[a("h4",{staticClass:"ant-list-item-meta-title"},[a("span",[t._v("邀请新成员")])])])])]),a("a-list",{attrs:{itemLayout:"horizontal",loading:t.inviteMemberDraw.searching,dataSource:t.projectMembers,locale:{emptyText:t.inviteMemberDraw.keyword&&t.inviteMemberDraw.keyword.length>1?"没有搜索到相关成员":""}},scopedSlots:t._u([{key:"renderItem",fn:function(e,n){return a("a-list-item",{staticClass:"member-list-item"},[e.is_owner?t._e():a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a",{staticClass:"muted",on:{click:function(a){t.removeMember(e,n)}}},[a("a-icon",{attrs:{type:"user-delete"}}),t._v(" 移除")],1)]),a("a-list-item-meta",{attrs:{description:e.email}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1)]),a("a-drawer",{attrs:{wrapClassName:"info-drawer",title:"项目设置",width:"350",placement:"right",visible:t.configDraw.visible},on:{close:function(e){t.configDraw.visible=!1}}},[a("div",{staticClass:"config-wrapper"},[a("ul",{staticClass:"config-menus"},[a("li",{staticClass:"menu-item"},[a("a",{on:{click:function(e){t.projectModal.modalStatus=!0}}},[a("a-icon",{attrs:{type:"setting"}}),t._v("\n                        项目设置\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",[a("a-icon",{attrs:{type:"tags"}}),t._v("\n                        标签 *\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",{on:{click:function(e){t.recycleModal.modalStatus=!0}}},[a("a-icon",{attrs:{type:"delete"}}),t._v("\n                        查看回收站\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",[a("a-icon",{attrs:{type:"copy"}}),t._v("\n                        复制项目 *\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",[a("a-icon",{attrs:{type:"login"}}),t._v("\n                        导入任务 *\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",[a("a-icon",{attrs:{type:"logout"}}),t._v("\n                        导出任务 *\n                    ")],1)]),a("li",{staticClass:"menu-item"},[a("a",[a("a-icon",{attrs:{type:"block"}}),t._v("\n                        保存为项目模板 *\n                    ")],1)])])])]),a("a-modal",{staticClass:"project-config-modal",attrs:{width:800,title:t.projectModal.modalTitle,footer:null},model:{value:t.projectModal.modalStatus,callback:function(e){t.$set(t.projectModal,"modalStatus",e)},expression:"projectModal.modalStatus"}},[a("project-config",{attrs:{code:t.code},on:{update:t.updateProject}})],1),a("a-modal",{staticClass:"recycle-bin-modal",attrs:{width:800,title:t.recycleModal.modalTitle,footer:null},model:{value:t.recycleModal.modalStatus,callback:function(e){t.$set(t.recycleModal,"modalStatus",e)},expression:"recycleModal.modalStatus"}},[t.recycleModal.modalStatus?a("recycle-bin",{attrs:{code:t.code},on:{update:t.init}}):t._e()],1),a("a-modal",{staticClass:"invite-project-member",attrs:{width:360,title:t.projectMemberModal.modalTitle,footer:null},model:{value:t.projectMemberModal.modalStatus,callback:function(e){t.$set(t.projectMemberModal,"modalStatus",e)},expression:"projectMemberModal.modalStatus"}},[a("div",{staticClass:"member-list"},[a("a-list",{staticClass:"project-list",attrs:{itemLayout:"horizontal",loading:t.loading,dataSource:t.projectMembers},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("span",{attrs:{slot:"actions"},slot:"actions"},[a("a-button",{attrs:{size:"small",type:"dashed",icon:"user-add"},on:{click:function(a){t.setExecutor(e)}}},[t._v("设置")])],1),a("a-list-item-meta",{attrs:{description:e.email}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),a("a-avatar",{attrs:{slot:"avatar",icon:"user",src:e.avatar},slot:"avatar"})],1)],1)}}])})],1)]),t.showInviteMember?a("invite-project-member",{attrs:{"project-code":t.code},model:{value:t.showInviteMember,callback:function(e){t.showInviteMember=e},expression:"showInviteMember"}}):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"actives"},[a("a",{staticClass:"app",attrs:{"data-app":"tasks"}},[t._v("任务")])])}],o=a("f499"),s=a.n(o),r=a("795b"),c=a.n(r),l=(a("28a5"),a("55dd"),a("ac6a"),a("7f7f"),a("cebc")),d=(a("cadf"),a("551c"),a("097d"),a("bc3a")),u=a.n(d),p=a("2f62"),h=a("2ef0"),f=a.n(h),m=a("c1df"),v=a.n(m),g=a("1516"),b=a.n(g),k=a("d3a1"),_=a("58bf"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tabs",{attrs:{tabPosition:"left",defaultActiveKey:"1",animated:!1},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"check-square"}}),t._v("\n            任务\n        ")],1)]),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"link"}}),t._v("\n            文件\n        ")],1)]),a("div",{staticClass:"config-content"},[a("vue-scroll",[a("div",{staticClass:"content-item"},[a("div",{staticClass:"infos"},[a("a-list",[t.showLoadingMore?a("div",{style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"},attrs:{slot:"loadMore"},slot:"loadMore"},[t.loadingMore?a("a-spin"):a("a-button",{on:{click:t.onLoadMore}},[t._v("加载更多")])],1):t._e(),t._l(t.list,function(e,n){return a("a-list-item",{key:n},[a("a-list-item-meta",[a("div",{attrs:{slot:"title"},slot:"title"},[a("router-link",{directives:[{name:"show",rawName:"v-show",value:"1"==t.tabKey,expression:"tabKey == '1'"}],staticClass:"text-default",attrs:{to:"/project/space/task/"+t.code+"/detail/"+e.code}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")]),a("a",{directives:[{name:"show",rawName:"v-show",value:"2"==t.tabKey,expression:"tabKey == '2'"}],staticClass:"text-default",attrs:{target:"_blank",href:e.file_url}},[t._v("\n                                        "+t._s(e.fullName)+"\n                                    ")])],1),a("div",{attrs:{slot:"description"},slot:"description"},[t._v("\n                                    "+t._s(t.showTaskTime(e.deleted_time))+"\n                                ")])]),a("a",{staticClass:"muted",attrs:{slot:"actions"},on:{click:function(a){t.recoveryTask(e,n)}},slot:"actions"},[a("a-tooltip",{attrs:{title:"恢复内容"}},[a("a-icon",{attrs:{type:"undo"}})],1)],1),a("a",{staticClass:"muted",attrs:{slot:"actions"},on:{click:function(a){t.deleteItem(e,n)}},slot:"actions"},[a("a-tooltip",{attrs:{title:"彻底删除"}},[a("a-icon",{attrs:{type:"delete"}})],1)],1)],1)})],2)],1)])])],1)],1)},w=[],y=a("2f14"),x=a("b199"),j=a("3f5e"),T=a("1b80"),S=a("81fe"),M={name:"recycleBin",props:{code:{type:[String],default:function(){return""}}},mixins:[T["a"]],data:function(){return{loading:!1,tabKey:"1",project:{},list:[],showLoadingMore:!1,loadingMore:!1}},watch:{code:function(){this.init()},tabKey:function(t){this.init()}},created:function(){this.init()},methods:{init:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this;switch(t&&(this.list=[],this.pagination.page=1,this.pagination.pageSize=10,this.showLoadingMore=!1),this.requestData.deleted=1,this.requestData.projectCode=this.code,e.loading=!0,this.tabKey){case"1":e.getTasks();break;case"2":e.getFiles();break}},getTasks:function(){var t=this;Object(x["i"])(t.requestData).then(function(e){t.list=t.list.concat(e.data.list),t.pagination.total=e.data.total,t.showLoadingMore=t.pagination.total>t.list.length,t.loading=!1,t.loadingMore=!1})},getFiles:function(){var t=this;Object(j["c"])(t.requestData).then(function(e){t.list=t.list.concat(e.data.list),t.pagination.total=e.data.total,t.showLoadingMore=t.pagination.total>t.list.length,t.loading=!1,t.loadingMore=!1})},onLoadMore:function(){this.loadingMore=!0,this.pagination.page++,this.init(!1)},showTaskTime:function(t){return Object(S["b"])(t)},recoveryTask:function(t,e){var a=this;switch(this.tabKey){case"1":this.$confirm({title:"确定恢复内容？",content:"恢复后可在任务列表中查看",okText:"恢复内容",okType:"primary",cancelText:"再想想",onOk:function(){return Object(x["l"])(t.code).then(function(n){Object(y["a"])(n)&&(a.list.splice(e,1),a.$emit("update",t))}),c.a.resolve()}});break;case"2":this.$confirm({title:"确定恢复文件？",content:"恢复后可在我的文件中查看",okText:"恢复文件",okType:"primary",cancelText:"再想想",onOk:function(){return Object(j["d"])(t.code).then(function(n){Object(y["a"])(n)&&(a.list.splice(e,1),a.$emit("update",t))}),c.a.resolve()}});break}},deleteItem:function(t,e){var a=this;switch(this.tabKey){case"1":this.$confirm({title:"确定彻底删除任务？",content:"彻底删除任务后，该任务及其子任务将会被永久被删除。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(x["e"])(t.code).then(function(n){Object(y["a"])(n)&&(a.list.splice(e,1),a.$emit("update",t))}),c.a.resolve()}});break;case"2":this.$confirm({title:"确认彻底删除该文件？",content:"彻底删除文件后，相关的关联资源将会失效。",okText:"彻底删除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(j["a"])(t.code).then(function(n){Object(y["a"])(n)&&(a.list.splice(e,1),a.$emit("update",t))}),c.a.resolve()}});break}}}},D=M,O=(a("c9b7"),a("2877")),E=Object(O["a"])(D,C,w,!1,null,null,null);E.options.__file="recycleBin.vue";var I=E.exports,N=a("22b6");function $(t){return N["a"].post("project/task_stages",t)}function P(t){return N["a"].post("project/task_stages/tasks",t)}function L(t,e,a){return N["a"].post("project/task_stages/sort",{preCode:t,nextCode:e,projectCode:a})}function A(t){return N["a"].post("project/task_stages/save",t)}function Y(t){return N["a"].post("project/task_stages/edit",t)}function z(t){return N["a"].post("project/task_stages/delete",{code:t})}var F=a("24d2"),X=a("9f5d"),B=a("4200"),R=a("97a8"),K={name:"project-space-task",components:{RecycleBin:I,draggable:b.a,inviteProjectMember:k["a"],projectConfig:_["a"]},data:function(){return{tableData:[],pagination:{},columns:[{title:"Name",dataIndex:"name.first",sorter:!0,width:"20%"},{title:"Gender",dataIndex:"gender",filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],width:"20%"},{title:"Email",dataIndex:"email"}],table_modal:!1,code:this.$route.params.code,loading:!0,project:{},stageName:"",task:{},taskStages:[],defaultExecutor:{},projectMembers:[],projectMembersCopy:[],createTaskLoading:!1,showCreateStage:!1,preCode:"",nextCode:"",stageKeys:[],stageModal:{form:this.$form.createForm(this),stageCode:"",stageIndex:0,modalStatus:!1,confirmLoading:!1,modalTitle:"编辑列表"},slideMenuKey:"",showInviteMember:!1,inviteMemberDraw:{visible:!1,keyword:"",searching:!1,list:[]},configDraw:{visible:!1},projectModal:{modalStatus:!1,modalTitle:"项目设置"},recycleModal:{modalStatus:!1,modalTitle:"查看回收站"},projectMemberModal:{loading:!1,currentStageIndex:0,modalStatus:!1,modalTitle:"设置任务执行者"}}},computed:Object(l["a"])({},Object(p["c"])({userInfo:function(t){return t.userInfo}}),{scrollOps:function(){return{rail:{background:"#e5e5e5",opacity:1},bar:{keepShow:!0}}}}),watch:{$route:function(t,e){var a=this;if("taskdetail"==e.name){var n=e.query.from;void 0!=n&&P({stageCode:this.taskStages[n].code}).then(function(t){a.taskStages[n].tasksLoading=!1,a.taskStages[n].tasks=t.data;var e=a.taskStages[n].doneTasks=[],i=a.taskStages[n].unDoneTasks=[];t.data.forEach(function(t){t.done?e.push(t):i.push(t)})})}},inviteMemberDraw:{handler:function(t){t.visible?this.slideMenuKey="member":this.slideMenuKey=!1,t.keyword&&this.searchInviteMember()},deep:!0},configDraw:{handler:function(t){t.visible?this.slideMenuKey="config":this.slideMenuKey=!1},deep:!0},showInviteMember:function(t){t||this.getProjectMembers()}},created:function(){this.defaultExecutor=this.userInfo,this.getProject(),this.getProjectMembers(),this.init()},mounted:function(){this.fetch()},methods:{handleTableChange:function(t,e,a){console.log(t);var n=Object(l["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(l["a"])({results:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("params:",e),e.results=10,this.loading=!0,u.a.get("https://randomuser.me/api",{params:e}).then(function(e){var a=Object(l["a"])({},t.pagination);a.total=200,t.loading=!1,t.tableData=e.data.results,t.pagination=a,console.log(e,t.tableData,11111)})},changeViewMode:function(){this.table_modal?this.table_modal=!1:this.table_modal=!0},init:function(){this.getTaskStages()},getProject:function(){var t=this;this.loading=!0,Object(F["e"])(this.code).then(function(e){t.loading=!1,t.project=e.data})},getProjectMembers:function(){var t=this;Object(X["c"])({projectCode:this.code,pageSize:100}).then(function(e){t.projectMembers=e.data.list,t.projectMembersCopy=e.data.list})},getTaskStages:function(){var t=this;$({projectCode:this.code,pageSize:30}).then(function(e){t.taskStages=e.data.list,t.taskStages&&t.taskStages.forEach(function(t){P({stageCode:t.code}).then(function(e){var a=0;e.data.forEach(function(e){e.canRead||a++,e.done?t.doneTasks.push(e):t.unDoneTasks.push(e)}),t.canNotReadCount=a,t.tasksLoading=!1,t.tasks=e.data})})})},filterTask:function(t,e){return t.filter(function(t){return t.done==e})},showTaskCard:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.taskStages.forEach(function(t){t.showTaskCard=!1}),!1===e)return!1;this.taskStages[e].showTaskCard=a,this.$nextTick(function(){t.$refs[e+"-stage"][0].scrollIntoView("#card"+e),t.$refs["inputTaskName".concat(e)][0].focus()})},selectExecutor:function(t){var e=t.key;this.defaultExecutor=this.projectMembers[e]},createTask:function(t,e){if(!this.task.name)return this.$message.warning("任务内容不能为空",2),!1;this.task.stage_code=t,this.task.project_code=this.code,this.task.assign_to=this.defaultExecutor.code,this.confirmCreateTask(e)},confirmCreateTask:function(t){var e=this;if(e.createTaskLoading)return e.$message.warning("正在添加任务，请稍后...",2),!1;setTimeout(function(){!0===e.createTaskLoading&&e.$message.loading({content:"正在添加任务，请稍后...",duration:5})},2e3),e.createTaskLoading=!0,Object(x["o"])(e.task).then(function(a){e.createTaskLoading=!1;var n=Object(y["a"])(a);if(n){e.$message.destroy();var i=e.taskStages[t];i.tasks.push(a.data),e.taskStages[t].unDoneTasks.push(a.data),e.task={}}}).catch(function(){e.createTaskLoading=!1})},taskDone:function(t,e,a,n){var i=null,o=this.taskStages[e].unDoneTasks,s=this.taskStages[e].doneTasks;if(i=n?o[a]:s[a],i.hasUnDone)return!1;Object(x["u"])(t,n).then(function(t){var e=Object(y["a"])(t);if(!e)return!1;i.done=n,n?(o.splice(a,1),s.push(i),s=s.sort(function(t,e){return t.sort===e.sort?t.id_num-e.id_num:t.sort-e.sort})):(s.splice(a,1),o.push(i),o=o.sort(function(t,e){return t.sort===e.sort?t.id_num-e.id_num:t.sort-e.sort}))})},showInputStrageName:function(){var t=this;this.showCreateStage=!this.showCreateStage,this.$nextTick(function(){t.$refs.inputStageName.focus()})},doStage:function(t){var e=this,a=this,n=t.key.split("_"),i=n[n.length-2],o=n[n.length-1],s=n[0];switch(s){case"editStage":this.stageModal.stageCode=i,this.stageModal.stageIndex=o,this.$nextTick(function(){e.stageModal.form.setFieldsValue({name:e.taskStages[o].name}),e.$refs.inputStageTitle.focus()}),this.stageModal.modalStatus=!0;break;case"recycleBatch":this.$confirm({title:"移到回收站",content:"您确定要把列表下的所有任务移到回收站吗？",okText:"移到回收站",okType:"danger",cancelText:"再想想",onOk:function(){return Object(x["n"])({stageCode:i}).then(function(t){var e=Object(y["a"])(t);if(!e)return!1;a.$set(a.taskStages[o],"tasks",[])}),c.a.resolve()}});break;case"setEndTime":this.set_type_endTime_modal=!0;break;case"setExecutor":this.projectMemberModal.currentStageIndex=o,this.projectMemberModal.modalStatus=!0;break;case"delStage":if(this.taskStages[o].tasks.length>0)return this.$warning({title:"删除列表",content:"请先清空此列表上的任务，然后再删除这个列表",okText:"确定"}),!1;this.$confirm({title:"删除列表",content:"您确定要永远删除这个列表吗？",okText:"删除",okType:"danger",cancelText:"再想想",onOk:function(){return z(i),a.taskStages.splice(o,1),c.a.resolve()}});break}},creteStage:function(){var t=this;if(!this.stageName)return this.$message.warning("请输入列表名称",2),!1;A({name:this.stageName,projectCode:this.code}).then(function(e){var a=Object(y["a"])(e);if(!a)return!1;var n=e.data;t.taskStages.push(n),t.stageName="",t.$nextTick(function(){document.getElementById("board-scrum-stages").scrollLeft=1e4})})},editStage:function(){var t=this,e=this.stageModal.form.getFieldsValue();if(!e.name)return this.$message.warning("请输入列表名称",2),!1;Y({name:e.name,stageCode:this.stageModal.stageCode}).then(function(a){var n=Object(y["a"])(a);if(!n)return!1;t.taskStages[t.stageModal.stageIndex].name=e.name,t.stageModal.modalStatus=!1})},setExecutor:function(t){var e=this,a=this.taskStages[this.projectMemberModal.currentStageIndex],n=[];a.tasks.forEach(function(t){t.canRead&&n.push(t.code)}),n?Object(x["b"])({taskCodes:s()(n),executorCode:t.code}).then(function(t){if(e.projectMemberModal.modalStatus=!1,!Object(y["a"])(t))return!1;P({stageCode:a.code}).then(function(t){var e=0;t.data.forEach(function(t){t.canRead||e++}),a.canNotReadCount=e,a.tasksLoading=!1,a.tasks=t.data})}):this.projectMemberModal.modalStatus=!1},showTaskPri:function(t){return{warning:1==t,error:2==t}},showTimeLabel:function(t){var e="label-primary";if(null==t)return e;var a=v()(v()(t).format("YYYY-MM-DD")).diff(v()().format("YYYY-MM-DD"),"days");return a<0?e="label-danger":0==a?e="label-warning":a>7&&(e="label-normal"),e},showTaskTime:function(t,e){return Object(S["a"])(t,e)},taskDetail:function(t,e){this.$router.push("".concat(this.$route.path,"/detail/").concat(t,"?from=").concat(e))},stageMove:function(t){this.preCode=t.draggedContext.element.code,this.nextCode=t.relatedContext.element.code},stageSort:function(){L(this.preCode,this.nextCode,this.code)},taskSort:function(t){console.log(t);for(var e=t.to.parentNode.parentNode.parentNode.getAttribute("id"),a="",n=0,i=t.to.children.length;n<i;n++)a+=","+t.to.children[n].getAttribute("id");Object(x["s"])({stageCode:e,codes:a.substr(1)})},handleResize:function(t,e){t.barSize&&(this.taskStages[e].fixedCreator=!0)},visibleDraw:function(t){"member"==t?(this.configDraw.visible=!1,this.inviteMemberDraw.visible=!this.inviteMemberDraw.visible):(this.inviteMemberDraw.visible=!1,this.configDraw.visible=!this.configDraw.visible)},removeMember:function(t,e){var a=this;this.$confirm({title:"您确定要将「".concat(t.name,"」从项目中移除吗？"),content:"移除后该成员将不能查看任何关于该项目的信息",okText:"移除",okType:"danger",cancelText:"再想想",onOk:function(){return Object(X["d"])(t.code,a.code).then(function(t){Object(y["a"])(t)&&(a.projectMembers.splice(e,1),Object(R["b"])({title:"移除成功"},"notice","success"))}),c.a.resolve()}})},inviteMember:function(t){Object(X["b"])(t.memberCode,this.projectCode).then(function(e){var a=Object(y["a"])(e);a&&(t.joined=!0)})},searchInviteMember:f.a.debounce(function(){var t=this;if(this.inviteMemberDraw.keyword||(this.projectMembers=JSON.parse(s()(this.projectMembersCopy))),this.inviteMemberDraw.keyword.length<=1)return!1;this.searching=!0,this.projectMembers=this.projectMembers.filter(function(e){return-1!=e.name.indexOf(t.inviteMemberDraw.keyword)})},500),updateProject:function(t){this.project=t},collectProject:function(){var t=this,e=this.project.collected?"cancel":"collect";Object(B["a"])(this.project.code,e).then(function(e){Object(y["a"])(e)&&(t.project.collected=!t.project.collected)})}}},H=K,q=(a("2b2a"),Object(O["a"])(H,n,i,!1,null,null,null));q.options.__file="task.vue";e["default"]=q.exports}}]);